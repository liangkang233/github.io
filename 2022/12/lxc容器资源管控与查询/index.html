<!doctype html><html lang=zh><head><title>Cgroupsç®¡ç†lxcå®¹å™¨å°ç»“ - LK233's Blog</title><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,minimal-ui"><meta name=renderer content="webkit"><meta http-equiv=cache-control content="no-transform"><meta http-equiv=cache-control content="no-siteapp"><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="black"><meta name=format-detection content="telephone=no,email=no,adress=no"><meta name=theme-color content="#000000"><meta http-equiv=window-target content="_top"><meta name=description content="å…³äº lxc å®¹å™¨ ä½¿ç”¨Cgroupsè¿›è¡Œèµ„æºçš„æ§åˆ¶ä¸æŸ¥è¯¢"><link rel=apple-touch-icon sizes=180x180 href=/web/social.ico><link rel=icon type=ico/png href=/web/GitHub-Mark-32px.png sizes=32x32><meta name=generator content="Hugo 0.107.0 with theme pure"><title>Cgroupsç®¡ç†lxcå®¹å™¨å°ç»“ - LK233's Blog</title><link rel=stylesheet href=https://liangkang233.github.io/css/style.min.911fc455aff286fbb0796ca516874da5dbf4b20cf101ff5f78329dc97ed7c711.css><link rel=stylesheet href=https://cdn.staticfile.org/highlight.js/9.15.10/styles/github.min.css async><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.css async><meta property="og:title" content="Cgroupsç®¡ç†lxcå®¹å™¨å°ç»“"><meta property="og:description" content="å…³äº lxc å®¹å™¨ ä½¿ç”¨Cgroupsè¿›è¡Œèµ„æºçš„æ§åˆ¶ä¸æŸ¥è¯¢"><meta property="og:type" content="article"><meta property="og:url" content="https://liangkang233.github.io/2022/12/lxc%E5%AE%B9%E5%99%A8%E8%B5%84%E6%BA%90%E7%AE%A1%E6%8E%A7%E4%B8%8E%E6%9F%A5%E8%AF%A2/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-12-01T00:00:00+00:00"><meta property="article:modified_time" content="2022-12-01T00:00:00+00:00"><meta itemprop=name content="Cgroupsç®¡ç†lxcå®¹å™¨å°ç»“"><meta itemprop=description content="å…³äº lxc å®¹å™¨ ä½¿ç”¨Cgroupsè¿›è¡Œèµ„æºçš„æ§åˆ¶ä¸æŸ¥è¯¢"><meta itemprop=datePublished content="2022-12-01T00:00:00+00:00"><meta itemprop=dateModified content="2022-12-01T00:00:00+00:00"><meta itemprop=wordCount content="5125"><meta itemprop=keywords content="linux,å®¹å™¨,"><meta name=twitter:card content="summary"><meta name=twitter:title content="Cgroupsç®¡ç†lxcå®¹å™¨å°ç»“"><meta name=twitter:description content="å…³äº lxc å®¹å™¨ ä½¿ç”¨Cgroupsè¿›è¡Œèµ„æºçš„æ§åˆ¶ä¸æŸ¥è¯¢"><!--[if lte IE 9]><script src=https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js></script><![endif]--><!--[if lt IE 9]><script src=https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js></script>
<script src=https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js></script><![endif]--></head><body class="main-center theme-black" itemscope itemtype=http://schema.org/WebPage><header class=header itemscope itemtype=http://schema.org/WPHeader><div class=slimContent><div class=navbar-header><div class="profile-block text-center"><a id=avatar href=https://github.com/liangkang233 target=_blank><img class="img-circle img-rotate" src=https://liangkang233.github.io/web/head.png width=200 height=200></a><h2 id=name class="hidden-xs hidden-sm">LK233</h2><h3 id=title class="hidden-xs hidden-sm hidden-md">ä¸‰æ—  é’å¹´</h3><small id=location class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i>ç°å±… é‡åº†</small></div><div class=search id=search-form-wrap><form class="search-form sidebar-form"><div class=input-group><input type=text class="search-form-input form-control" placeholder=æœç´¢>
<span class=input-group-btn><button type=submit class="search-form-submit btn btn-flat" onclick=return!1><i class="icon icon-search"></i></button></span></div><div class=ins-search><div class=ins-search-mask></div><div class=ins-search-container><div class=ins-input-wrapper><input type=text class=ins-search-input placeholder=æƒ³è¦æŸ¥æ‰¾ä»€ä¹ˆ... x-webkit-speech>
<button type=button class="close ins-close ins-selectable" data-dismiss=modal aria-label=Close><span aria-hidden=true>Ã—</span></button></div><div class=ins-section-wrapper><div class=ins-section-container></div></div></div></div></form></div><button class="navbar-toggle collapsed" type=button data-toggle=collapse data-target=#main-navbar aria-controls=main-navbar aria-expanded=false>
<span class=sr-only>Toggle navigation</span>
<span class=icon-bar></span>
<span class=icon-bar></span>
<span class=icon-bar></span></button></div><nav id=main-navbar class="collapse navbar-collapse" itemscope itemtype=http://schema.org/SiteNavigationElement role=navigation><ul class="nav navbar-nav main-nav"><li class="menu-item menu-item-home"><a href=/><i class="icon icon-home-fill"></i>
<span class=menu-title>ä¸»é¡µ</span></a></li><li class="menu-item menu-item-books"><a href=/posts/><i class="icon icon-book-fill"></i>
<span class=menu-title>æ–‡ç« </span></a></li><li class="menu-item menu-item-email"><a href=mailto:liangkang233@outlook.com><i class="icon icon-email"></i>
<span class=menu-title>é‚®ç®±</span></a></li><li class="menu-item menu-item-github"><a href=https://github.com/liangkang233><i class="icon icon-github-fill"></i>
<span class=menu-title>github</span></a></li><li class="menu-item menu-item-about"><a href=/about/><i class="icon icon-cup-fill"></i>
<span class=menu-title>å…³äº</span></a></li></ul></nav></div></header><aside class=sidebar itemscope itemtype=http://schema.org/WPSideBar><div class=slimContent><div class=widget><h3 class=widget-title>NEVER SETTLE</h3><div class=widget-body><div id=board><div class=content><img src=/images/me.jpg alt=me.jpg></div></div></div></div><div class=widget><h3 class=widget-title>æ ‡ç­¾</h3><div id=tag-cloud-list class=widget-body><a href=https://liangkang233.github.io/tags/blog-test/ class=tag-list-link rel=1>blog-test<span class=tag-list-count>1</span></a>
<a href=https://liangkang233.github.io/tags/c/c++/ class=tag-list-link rel=12>c/c++<span class=tag-list-count>12</span></a>
<a href=https://liangkang233.github.io/tags/emane/ class=tag-list-link rel=3>emane<span class=tag-list-count>3</span></a>
<a href=https://liangkang233.github.io/tags/go/ class=tag-list-link rel=5>go<span class=tag-list-count>5</span></a>
<a href=https://liangkang233.github.io/tags/linux/ class=tag-list-link rel=9>linux<span class=tag-list-count>9</span></a>
<a href=https://liangkang233.github.io/tags/network/ class=tag-list-link rel=4>network<span class=tag-list-count>4</span></a>
<a href=https://liangkang233.github.io/tags/python/ class=tag-list-link rel=5>python<span class=tag-list-count>5</span></a>
<a href=https://liangkang233.github.io/tags/sdn/ class=tag-list-link rel=1>sdn<span class=tag-list-count>1</span></a>
<a href=https://liangkang233.github.io/tags/%E4%BB%BF%E7%9C%9F/ class=tag-list-link rel=5>ä»¿çœŸ<span class=tag-list-count>5</span></a>
<a href=https://liangkang233.github.io/tags/%E5%AE%B9%E5%99%A8/ class=tag-list-link rel=3>å®¹å™¨<span class=tag-list-count>3</span></a>
<a href=https://liangkang233.github.io/tags/%E5%BC%80%E5%8F%91/ class=tag-list-link rel=3>å¼€å‘<span class=tag-list-count>3</span></a>
<a href=https://liangkang233.github.io/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/ class=tag-list-link rel=3>æ•°æ®ç»“æ„<span class=tag-list-count>3</span></a>
<a href=https://liangkang233.github.io/tags/%E7%AE%97%E6%B3%95/ class=tag-list-link rel=3>ç®—æ³•<span class=tag-list-count>3</span></a>
<a href=https://liangkang233.github.io/tags/%E8%B7%AF%E7%94%B1/ class=tag-list-link rel=1>è·¯ç”±<span class=tag-list-count>1</span></a></div><script>document.onreadystatechange=()=>{document.readyState==="complete"&&tagCloud("#tag-cloud-list a",8,20)};function tagCloud(e,t,n){let o=0,s=0;$(e).each(function(){let e=Number($(this).attr("rel"));o<e&&(o=e),(s>e||s==0)&&(s=e)});let i=(n-t)/(o-s);$(e).each(function(){let e=$(this).attr("rel")-s;$(this).css({"font-size":t+e*i+"px"})})}</script></div><div class=widget><h3 class=widget-title>åˆ†ç±»</h3><div class=widget-body><ul class=category-list><li class=category-list-item><a href=https://liangkang233.github.io/categories/core/ class=category-list-link>core</a><span class=category-list-count>8</span></li><li class=category-list-item><a href=https://liangkang233.github.io/categories/%E5%AD%A6%E4%B9%A0/ class=category-list-link>å­¦ä¹ </a><span class=category-list-count>10</span></li><li class=category-list-item><a href=https://liangkang233.github.io/categories/%E5%B7%A5%E5%85%B7/ class=category-list-link>å·¥å…·</a><span class=category-list-count>10</span></li><li class=category-list-item><a href=https://liangkang233.github.io/categories/%E6%9D%82%E8%B0%88/ class=category-list-link>æ‚è°ˆ</a><span class=category-list-count>1</span></li><li class=category-list-item><a href=https://liangkang233.github.io/categories/%E7%BC%96%E7%A8%8B/ class=category-list-link>ç¼–ç¨‹</a><span class=category-list-count>6</span></li><li class=category-list-item><a href=https://liangkang233.github.io/categories/%E8%AE%B0%E5%BD%95/ class=category-list-link>è®°å½•</a><span class=category-list-count>6</span></li></ul></div></div><div class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç« </h3><div class=widget-body><ul class="recent-post-list list-unstyled no-thumbnail"><li><div class=item-inner><p class=item-title><a href=https://liangkang233.github.io/2022/12/lxc%E5%AE%B9%E5%99%A8%E8%B5%84%E6%BA%90%E7%AE%A1%E6%8E%A7%E4%B8%8E%E6%9F%A5%E8%AF%A2/ class=title>Cgroupsç®¡ç†lxcå®¹å™¨å°ç»“</a></p><p class=item-date><time datetime="2022-12-01 00:00:00 +0000 UTC" itemprop=datePublished>2022-12-01</time></p></div></li><li><div class=item-inner><p class=item-title><a href=https://liangkang233.github.io/2022/10/grpc%E6%B5%81%E5%8F%8A%E5%BC%82%E6%AD%A5%E7%9A%84%E5%AD%A6%E4%B9%A0/ class=title>gRPCæµã€å¼‚æ­¥é€šä¿¡</a></p><p class=item-date><time datetime="2022-10-27 00:00:00 +0000 UTC" itemprop=datePublished>2022-10-27</time></p></div></li><li><div class=item-inner><p class=item-title><a href=https://liangkang233.github.io/2022/08/%E6%A1%8C%E9%9D%A2%E6%91%86%E4%BB%B6/ class=title>è¿·ä½ æ¡Œé¢æ‘†ä»¶</a></p><p class=item-date><time datetime="2022-08-17 00:00:00 +0000 UTC" itemprop=datePublished>2022-08-17</time></p></div></li><li><div class=item-inner><p class=item-title><a href=https://liangkang233.github.io/2022/07/srv6%E5%AD%A6%E4%B9%A0/ class=title>SRv6å­¦ä¹ </a></p><p class=item-date><time datetime="2022-07-18 00:00:00 +0000 UTC" itemprop=datePublished>2022-07-18</time></p></div></li><li><div class=item-inner><p class=item-title><a href=https://liangkang233.github.io/2022/06/emane%E6%B5%81%E7%A8%8B%E6%A6%82%E8%BF%B0/ class=title>Emaneæµç¨‹æ¦‚è¿°</a></p><p class=item-date><time datetime="2022-06-28 00:00:00 +0000 UTC" itemprop=datePublished>2022-06-28</time></p></div></li></ul></div></div></div></aside><aside class="sidebar sidebar-toc collapse" id=collapseToc itemscope itemtype=http://schema.org/WPSideBar><div class=slimContent><h4 class=toc-title>æ–‡ç« ç›®å½•</h4><nav id=toc class="js-toc toc"></nav></div></aside><main class=main role=main><div class=content><article id=- class="article article-type-" itemscope itemtype=http://schema.org/BlogPosting><div class=article-header><h1 itemprop=name><a class=article-title href=/2022/12/lxc%E5%AE%B9%E5%99%A8%E8%B5%84%E6%BA%90%E7%AE%A1%E6%8E%A7%E4%B8%8E%E6%9F%A5%E8%AF%A2/>Cgroupsç®¡ç†lxcå®¹å™¨å°ç»“</a></h1><div class=article-meta><span class=article-date><i class="icon icon-calendar-check"></i>&nbsp;
<a href=https://liangkang233.github.io/2022/12/lxc%E5%AE%B9%E5%99%A8%E8%B5%84%E6%BA%90%E7%AE%A1%E6%8E%A7%E4%B8%8E%E6%9F%A5%E8%AF%A2/ class=article-date><time datetime="2022-12-01 00:00:00 +0000 UTC" itemprop=datePublished>2022-12-01</time></a></span>
<span class=article-category><i class="icon icon-folder"></i>&nbsp;
<a class=article-category-link href=/categories/%E5%B7%A5%E5%85%B7/>å·¥å…·</a></span>
<span class=article-tag><i class="icon icon-tags"></i>&nbsp;
<a class=article-tag-link href=/tags/linux/>linux</a>
<a class=article-tag-link href=/tags/%E5%AE%B9%E5%99%A8/>å®¹å™¨</a></span>
<span class=post-comment><i class="icon icon-comment"></i>&nbsp;<a href=/2022/12/lxc%E5%AE%B9%E5%99%A8%E8%B5%84%E6%BA%90%E7%AE%A1%E6%8E%A7%E4%B8%8E%E6%9F%A5%E8%AF%A2/#comments class=article-comment-link>è¯„è®º</a></span>
<span class="post-wordcount hidden-xs" itemprop=wordCount>å­—æ•°ç»Ÿè®¡: 5125å­—</span></div></div><div class="article-entry marked-body js-toc-content" itemprop=articleBody><h1 id=èƒŒæ™¯>èƒŒæ™¯</h1><p>æœ€è¿‘åœ¨åšå…³äº å®¹å™¨èµ„æºæ§åˆ¶ï¼Œæ‰€ä»¥å…·ä½“åˆ†æä¸‹lxcå®¹å™¨å’ŒCgroupsã€‚</p><p>å…¶å®ä¹‹å‰å°±å·²ç»åšè¿‡ <a href=/2021/12/%E5%AE%B9%E5%99%A8%E7%9B%B8%E5%85%B3><em>lxcå®¹å™¨</em> å’Œ <em>dockerå®¹å™¨</em> çš„åŒºåˆ«</a> å†…å®¹æ¢è®¨ï¼Œä¸è¿‡æ˜¯ç†è®ºä¸Šçš„é˜è¿°ï¼Œè¿™é‡Œæˆ‘å†ä»<a href=https://coreemu.github.io/core/>core</a>çš„å…·ä½“å®æ–½æ¥ä»‹ç»ä¸‹ã€‚</p><h1 id=coreå†…lxcå®¹å™¨çš„å…·ä½“å®æ–½>coreå†…lxcå®¹å™¨çš„å…·ä½“å®æ–½</h1><p>é¦–å…ˆï¼Œdockerå®¹å™¨å®ç°çš„ä¸¤å¤§å…ƒç´ æ˜¯ namespace å’Œ Cgroups åšå®¹å™¨é—´å±æ€§éš”ç¦»å’Œèµ„æºæ§åˆ¶ã€‚</p><p>é¡¾åæ€ä¹‰ï¼Œlxcæ˜¯ <em>linux contain</em> çš„ç¼©å†™ï¼Œè¯´æ˜æ˜¯ç”±linuxå†…æ ¸å®ç°ï¼Œåšåˆ°èµ„æºçš„éš”ç¦»è¿™ä¸€å®¹å™¨çš„åŸºç¡€åŠŸèƒ½ã€‚è€Œcore æ­£æ˜¯ä½¿ç”¨ä¸€ç³»åˆ—linuxå†…æ ¸å®ç° <strong>iproute2</strong> å°è£…çš„ netstatã€è™šæ‹Ÿç½‘ç»œè®¾å¤‡å‘½ä»¤æ„å»ºçš„å®¹å™¨çš„namespaceéš”ç¦»å’Œè™šæ‹Ÿé“¾è·¯ã€‚</p><p>è‡³äºdockeræ˜¯ç”¨goå®ç°äº†è¿™äº›æ“ä½œæ¥å£ï¼Œå¹¶åœ¨ä¸åŒç³»ç»Ÿä¸Š(ä¾‹å¦‚windowsçš„wsl)è¿›è¡Œé€‚é…ï¼Œæ‰€ä»¥coreåªèƒ½è¿è¡Œåœ¨linuxå‘è¡Œç‰ˆä¸Šã€‚coreå¹¶æ²¡æœ‰å®ç°ä½¿ç”¨Cgroupsè¿›è¡Œç›¸å…³èµ„æºæ§åˆ¶æ“ä½œï¼Œç±»ä¼¼çš„dockerè‡ªå·±ç”¨goå®ç°äº†ï¼Œå½“ç„¶ docker çš„ namespace Cgroupsåº•å±‚è¿˜æ˜¯linuxå†…æ ¸æä¾›æ”¯æ’‘ã€‚</p><h2 id=coreé‡Œlxcå®¹å™¨å’Œdockerå®¹å™¨çš„å…·ä½“å®ç°åŒºåˆ«>coreé‡Œlxcå®¹å™¨å’Œdockerå®¹å™¨çš„å…·ä½“å®ç°åŒºåˆ«ï¼š</h2><p>coreå†…çš„lxcé€šè¿‡ core/netns æ–‡ä»¶å¤¹å†…çš„ cè¯­è¨€å®ç°çš„ vnode æ¥è¿›è¡ŒåŸºç¡€çš„å®¹å™¨åˆ›å»ºï¼ˆåŠŸèƒ½ç±»ä¼¼ ip netns ç”Ÿæˆçš„æŒ‚è½½ç‚¹ä¸€èˆ¬æ˜¯/tmp/pycore.XXX/nXXX åˆå§‹ç›®å½•ä¸º /tmp/pycore.XXXX/nXXX.confï¼‰ï¼Œvcmdæ¥ä¸å®¹å™¨èŠ‚ç‚¹é€šä¿¡ä¸‹å‘æ‰§è¡Œcmdã€‚</p><ol><li><p><strong>Mount Namespace</strong></p><p>éš”ç¦»æ–‡ä»¶ç³»ç»ŸæŒ‚è½½ç‚¹ã€‚å€¼å¾—<strong>æ³¨æ„</strong>çš„æ˜¯ï¼šcoreä¸­ä¸ä¼šéš”ç¦»å…¨éƒ¨è·¯å¾„ï¼Œè€Œæ˜¯é»˜è®¤ä¸ä¸»æœºå…±äº«ã€‚åªæœ‰åœ¨èŠ‚ç‚¹çš„servicesé…ç½®äº†å¯¹åº”æŒ‚è½½ç‚¹æ—¶ï¼Œæ‰ä¼šæŒ‚è½½èŠ‚ç‚¹ç‹¬æœ‰ç›®å½•ã€‚ä¾‹å¦‚quaggaæœåŠ¡ä¸­ ä¸ºäº†éš”ç¦»ä¸åŒé…ç½®æ–‡ä»¶ï¼Œcoreä¼šæŒ‚è½½<code>/usr/local/etc/quagga</code>æ–‡ä»¶å¤¹ã€‚</p><pre><code class=language-bash># å®¹å™¨å†…æŸ¥è¯¢åˆ°æŒ‚è½½ç›®å½•
root@n1:/tmp/pycore.34513/n1.conf# findmnt | grep quagga
â”‚   â””â”€/run/quagga                  /dev/sda4[/pycore.34513/n1.conf/var.run.quagga]       ext4                rw,relatime
â””â”€/usr/local/etc/quagga            /dev/sda4[/pycore.34513/n1.conf/usr.local.etc.quagga] ext4                rw,relatime
# å®¿ä¸»ä¸»æœºæ— æ³•æŸ¥è¯¢åˆ°æŒ‚è½½ç›®å½•
lk233@vm-5gc:~$ findmnt | grep quagga

</code></pre><p>è€Œdockerç›®å½•æ¨¡å¼æ˜¯éš”ç¦»æ‰€æœ‰æ–‡ä»¶å¤¹ï¼Œé€šè¿‡<a href=https://blog.csdn.net/flynetcn/article/details/119567387>UnionFS</a>æ¥å®ç°ç›®å½•ä¸‹çš„å…¨éƒ¨éš”ç¦»ã€‚</p></li><li><p><strong>PID Namespace</strong></p><p>éš”ç¦»è¿›ç¨‹IDã€‚å€¼å¾—<strong>æ³¨æ„</strong>çš„æ˜¯ï¼šæ‰€æœ‰å®¹å™¨å†…è¿›ç¨‹éƒ½æ˜¯vnodeåˆ›å»ºè¿›ç¨‹çš„forkå­è¿›ç¨‹ï¼Œdockerå®¹å™¨ä¹Ÿæ˜¯ç±»ä¼¼çš„ï¼Œæ‰€ä»¥ dockerå®˜æ–¹æ–‡æ¡£ä¸æ¨èæŠŠå®¹å™¨å½“æˆè™šæ‹Ÿæœºç”¨éƒ¨ç½²å¤šä¸ªè¿›ç¨‹ï¼Œä¸€ä¸ªå®¹å™¨æ‰§è¡Œä¸€ä¸ªè¿›ç¨‹çš„æ€æƒ³ã€‚</p><p>å…³äºpidçš„è¯¦ç»†ä»‹ç»å¯ä»¥çœ‹çœ‹è¿™ç¯‡<a href=https://blog.csdn.net/flynetcn/article/details/119567350>åšå®¢</a>ï¼Œæ€»ç»“å°±æ˜¯ï¼šç¬¬0å±‚çš„ pidå‘½åç©ºé—´æ˜¯initè¿›ç¨‹æ‰€åœ¨çš„å‘½åç©ºé—´ã€‚å¦‚æœä¸€ä¸ªè¿›ç¨‹æ‰€åœ¨çš„ pidå‘½åç©ºé—´ ä¸º Nï¼Œé‚£ä¹ˆå…¶åœ¨ 0 ~ N å±‚pidå‘½åç©ºé—´ éƒ½æœ‰ä¸€ä¸ªæ˜ å°„çš„å”¯ä¸€çš„pidå·ã€‚<strong>ä¹Ÿå°±æ˜¯è¯´ é«˜å±‚pidå‘½åç©ºé—´ çš„è¿›ç¨‹å¯¹ ä½å±‚pidå‘½åç©ºé—´ çš„è¿›ç¨‹æ˜¯å¯è§çš„ï¼Œä½†æ˜¯ ä½å±‚pidå‘½åç©ºé—´ çš„è¿›ç¨‹å¯¹ é«˜å±‚pidå‘½åç©ºé—´ çš„è¿›ç¨‹æ˜¯ä¸å¯è§çš„ã€‚</strong>
<img src=/other/cgroups/9fbd221971c3bb64371158ce35a58221.jpg alt></p><pre><code class=language-bash># å®¿ä¸»ä¸»æœºæ‰§è¡Œ
lk233@vm-5gc:~/æ¡Œé¢/cgroups$ ps aux | grep zebra 
quagga    12397  0.0  0.0  27680  3160 ?        Ss   11:32   0:00 /usr/sbin/zebra -d
quagga    12450  0.0  0.0  27680  3116 ?        Ss   11:32   0:00 /usr/sbin/zebra -d

# å®¹å™¨å†…æ‰§è¡Œ
root@n1:/tmp/pycore.36535/n1.conf# ps aux | grep zebra 
quagga       29  0.0  0.0  27680  3160 ?        Ss   11:32   0:00 /usr/sbin/zebra -d
</code></pre></li><li><p><strong>ç½‘ç»œé“¾è·¯çš„åŒºåˆ«</strong></p><p>dockerç½‘ç»œæ¯”è¾ƒç®€å•ï¼Œæœ‰å››ç§ç½‘ç»œæ¨¡å¼ï¼š</p><table><thead><tr><th style=text-align:left>ç½‘ç»œæ¨¡å¼</th><th style=text-align:left>é…ç½®</th><th style=text-align:left>è¯´æ˜</th></tr></thead><tbody><tr><td style=text-align:left>bridgeæ¨¡å¼ |</td><td style=text-align:left>&ndash;net=bridge |</td><td style=text-align:left>(é»˜è®¤æ¨¡å¼) æ­¤æ¨¡å¼ä¼šä¸ºæ¯ä¸€ä¸ªå®¹å™¨éš”ç¦»ç©ºé—´åï¼Œåˆ›å»ºveth pairä¸€ç«¯æ”¾å…¥å®¹å™¨è®¾ç½®IPç­‰ï¼Œå¦ä¸€ç«¯è¿æ¥åˆ°ä¸€ä¸ªdocker0è™šæ‹Ÿç½‘æ¡¥ï¼Œé€šè¿‡docker0ç½‘æ¡¥ä»¥åŠIptables natè¡¨é…ç½®ä¸å®¿ä¸»æœºç«¯å£æ˜ å°„ï¼Œç›¸äº’é€šä¿¡ã€‚ |</td></tr><tr><td style=text-align:left>hostæ¨¡å¼ |</td><td style=text-align:left>&ndash;net=host |</td><td style=text-align:left>å®¹å™¨å’Œå®¿ä¸»æœºå…±äº«Network namespaceï¼Œå³ä¸éš”ç¦»ç½‘ç»œç©ºé—´ã€‚ |</td></tr><tr><td style=text-align:left>containeræ¨¡å¼</td><td style=text-align:left>&ndash;net=å®¹å™¨åæˆ–id</td><td style=text-align:left>å®¹å™¨å’Œå¦å¤–ä¸€ä¸ªå®¹å™¨å…±äº«Network namespaceã€‚ kubernetesä¸­çš„podå°±æ˜¯å¤šä¸ªå®¹å™¨å…±äº«ä¸€ä¸ªNetwork namespaceã€‚</td></tr><tr><td style=text-align:left>noneæ¨¡å¼</td><td style=text-align:left>&ndash;net=none</td><td style=text-align:left>è¯¥æ¨¡å¼å…³é—­äº†å®¹å™¨çš„ç½‘ç»œåŠŸèƒ½ï¼Œå³ä¸ä¸»æœºç½‘ç»œç©ºé—´éš”ç¦»å¼€</td></tr></tbody></table><p>è€Œcoreå†…çš„lxcå®¹å™¨é»˜è®¤æ˜¯noneæ¨¡å¼ï¼Œç„¶åè‡ªå·±æ ¹æ®æ‹“æ‰‘åˆ›å»ºé“¾è·¯ï¼Œä½¿ç”¨veth pairã€ tap/tunã€bridgeç­‰ç½‘ç»œè™šæ‹Ÿè®¾å¤‡å®ç°ã€‚ä¸‹å›¾æ˜¯ä¸€ä¸ªåŸºç¡€çš„ç‚¹å¯¹ç‚¹é“¾è·¯æ„å»ºã€‚</p><p><img src=/other/QQ%E6%88%AA%E5%9B%BE20221128135753.jpg alt></p></li><li><p><strong>IPC Namespace éš”ç¦»</strong></p><p>åŒºåˆ† System V IPC å’Œ POSIX æ¶ˆæ¯é˜Ÿåˆ—ã€‚</p></li><li><p><strong>Network Namespace</strong></p><p>éš”ç¦»ç½‘ç»œè®¾å¤‡èµ„æºï¼Œä¾‹å¦‚ç«¯å£ã€ipåœ°å€ç­‰ã€‚</p></li><li><p><strong>UTS Namespace</strong></p><p>éš”ç¦»ä¸»æœºåå’ŒåŸŸåã€‚</p></li><li><p><strong>User Namespace</strong></p><p>éš”ç¦»ç”¨æˆ·å’Œç”¨æˆ·ç»„ã€‚</p></li></ol><h1 id=å…³äºcgroupsçš„ä½¿ç”¨>å…³äºCgroupsçš„ä½¿ç”¨</h1><p>å‚è€ƒè¿™ç¯‡<a href=https://zhuanlan.zhihu.com/p/81668069>çŸ¥ä¹åšå®¢</a>çš„ä»‹ç»ï¼Œå¤ç°äº†ä¸‹å¯¹coreå®¹å™¨çš„cpuã€å†…å­˜æ§åˆ¶ã€‚</p><h2 id=ç›¸å…³æ¦‚å¿µä»‹ç»>ç›¸å…³æ¦‚å¿µä»‹ç»</h2><p>Cgroupså…¨ç§°Control Groupsï¼Œæ˜¯Linuxå†…æ ¸æä¾›çš„ç‰©ç†èµ„æºéš”ç¦»æœºåˆ¶ï¼Œé€šè¿‡è¿™ç§æœºåˆ¶ï¼Œå¯ä»¥å®ç°å¯¹Linuxè¿›ç¨‹æˆ–è€…è¿›ç¨‹ç»„çš„èµ„æºé™åˆ¶ã€éš”ç¦»å’Œç»Ÿè®¡åŠŸèƒ½ã€‚</p><p>æ¯”å¦‚å¯ä»¥é€šè¿‡cgroupé™åˆ¶ç‰¹å®šè¿›ç¨‹çš„èµ„æºä½¿ç”¨ï¼Œæ¯”å¦‚ä½¿ç”¨ç‰¹å®šæ•°ç›®çš„cpuæ ¸æ•°å’Œç‰¹å®šå¤§å°çš„å†…å­˜ï¼Œå¦‚æœèµ„æºè¶…é™çš„æƒ…å†µä¸‹ï¼Œä¼šè¢«æš‚åœæˆ–è€…æ€æ‰ã€‚</p><p>Cgroupæ˜¯äº2.6å†…æ ¸ç”±Googleå…¬å¸ä¸»å¯¼å¼•å…¥çš„ï¼Œå®ƒæ˜¯Linuxå†…æ ¸å®ç°èµ„æºè™šæ‹ŸåŒ–çš„æŠ€æœ¯åŸºçŸ³ï¼ŒLXC(Linux Containers)å’Œdockerå®¹å™¨æ‰€ç”¨åˆ°çš„èµ„æºéš”ç¦»æŠ€æœ¯ï¼Œæ­£æ˜¯Cgroupã€‚</p><ul><li><p>å­ç³»ç»Ÿ(subsystem): ä¸€ä¸ªå­ç³»ç»Ÿå…¶å®å°±æ˜¯ä¸€ç§èµ„æºçš„æ§åˆ¶å™¨ï¼Œåœ¨linuxä¸Šä¼šæŒ‚è½½åˆ°ä¾‹å¦‚ç›®å½•<code>/sys/fs/cgroup/cpu/lk233_cpu_test</code>ä¸Šï¼ŒæŸ¥è¯¢å¯¹åº”æ–‡ä»¶å°±å¯ä»¥çœ‹åˆ°é…ç½®å’Œå½“å‰èµ„æºçš„å‚æ•°ï¼Œæ¯”å¦‚memoryå­ç³»ç»Ÿå¯ä»¥æ§åˆ¶è¿›ç¨‹å†…å­˜çš„ä½¿ç”¨ã€‚å­ç³»ç»Ÿéœ€è¦åŠ å…¥åˆ°æŸä¸ªå±‚çº§ï¼Œç„¶åè¯¥å±‚çº§çš„æ‰€æœ‰æ§åˆ¶ç»„ï¼Œå‡å—åˆ°è¿™ä¸ªå­ç³»ç»Ÿçš„æ§åˆ¶ã€‚</p></li><li><p>ä»»åŠ¡(task): åœ¨cgroupä¸­ï¼Œä»»åŠ¡å°±æ˜¯ä¸€ä¸ªè¿›ç¨‹ã€‚æ§åˆ¶ç»„(control group): cgroupçš„èµ„æºæ§åˆ¶æ˜¯ä»¥æ§åˆ¶ç»„çš„æ–¹å¼å®ç°ï¼Œæ§åˆ¶ç»„æŒ‡æ˜äº†èµ„æºçš„é…é¢é™åˆ¶ã€‚è¿›ç¨‹å¯ä»¥åŠ å…¥åˆ°æŸä¸ªæ§åˆ¶ç»„ï¼Œä¹Ÿå¯ä»¥è¿ç§»åˆ°å¦ä¸€ä¸ªæ§åˆ¶ç»„ã€‚æŸ¥è¯¢å¯¹åº”<code>cat /sys/fs/cgroup/cpu/lk233_cpu_test/tasks</code>å³å¯çŸ¥é“è¯¥æ§åˆ¶ç»„åŒ…å«çš„å‚æ•°ã€‚</p></li><li><p>å±‚çº§(hierarchy): æ§åˆ¶ç»„æœ‰å±‚çº§å…³ç³»ï¼Œç±»ä¼¼æ ‘çš„ç»“æ„ï¼Œå­èŠ‚ç‚¹çš„æ§åˆ¶ç»„ç»§æ‰¿çˆ¶æ§åˆ¶ç»„çš„å±æ€§(èµ„æºé…é¢ã€é™åˆ¶ç­‰)ã€‚çˆ¶å­é›† æœ‰å…³è” å­èµ„æºä¼šç»Ÿè®¡åˆ°çˆ¶level
å¼ºåˆ¶ä¿®æ”¹çˆ¶çš„å°äºå­é™åˆ¶,å¯¹åº”çš„çˆ¶æˆ–å­ä¼šæ”¹ä¸ºé»˜è®¤å€¼(æ— é™åˆ¶)ã€‚ä½¿å¾—å±‚çº§ä»ä¸Šå¾€ä¸‹ ä¾ç…§æœ€å°çš„èµ„æºæ§åˆ¶ç»„æ¥ç®—ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼Œlimit_50æ§åˆ¶ç»„å°±æ˜¯lk233_cpu_testæ§åˆ¶ç»„çš„å­é›†åˆï¼Œå…¶å—åˆ°çˆ¶æ§åˆ¶ç»„çš„é™åˆ¶ã€‚</p></li></ul><pre><code class=language-bash>lk233@vm-5gc:/sys/fs/cgroup/cpu/lk233_cpu_test$ tree
.
â”œâ”€â”€ cgroup.clone_children
â”œâ”€â”€ cgroup.procs
â”œâ”€â”€ cpuacct.XX
â”œâ”€â”€ cpu.XX
â”œâ”€â”€ limit_50
â”‚   â”œâ”€â”€ cgroup.clone_children
|   â”œâ”€â”€ cpuacct.XX
|   â”œâ”€â”€ cpu.XX   #ç±»ä¼¼çˆ¶æ–‡ä»¶å¤¹å†…å®¹
â”‚   â””â”€â”€ tasks
â”œâ”€â”€ notify_on_release
â””â”€â”€ tasks
</code></pre><h2 id=å®é™…æµ‹è¯•>å®é™…æµ‹è¯•</h2><p>ä¸»è¦åˆ†æä¸‹ cpu memoryç›¸å…³çš„å‚æ•°ï¼š</p><h3 id=cpuæ–‡ä»¶å¤¹å†…å®¹>cpuæ–‡ä»¶å¤¹å†…å®¹ï¼š</h3><pre><code>lk233@vm-5gc:/sys/fs/cgroup/cpu/lk233_cpu_test/limit_50$ tree
.
â”œâ”€â”€ cgroup.clone_children
â”œâ”€â”€ cgroup.procs
â”œâ”€â”€ cpuacct.stat
â”œâ”€â”€ cpuacct.usage
â”œâ”€â”€ cpuacct.usage_all
â”œâ”€â”€ cpuacct.usage_percpu
â”œâ”€â”€ cpuacct.usage_percpu_sys
â”œâ”€â”€ cpuacct.usage_percpu_user
â”œâ”€â”€ cpuacct.usage_sys
â”œâ”€â”€ cpuacct.usage_user
â”œâ”€â”€ cpu.cfs_period_us
â”œâ”€â”€ cpu.cfs_quota_us
â”œâ”€â”€ cpu.shares
â”œâ”€â”€ cpu.stat
â”œâ”€â”€ cpu.uclamp.max
â”œâ”€â”€ cpu.uclamp.min
â”œâ”€â”€ notify_on_release
â””â”€â”€ tasks
</code></pre><blockquote><p>cfsæ˜¯Completely Fair Schedulerçš„ç¼©å†™ï¼Œä»£è¡¨å®Œå…¨å…¬å¹³è°ƒåº¦ï¼Œrtæ˜¯RealTimeçš„ç¼©å†™ï¼Œå®ƒæ˜¯å®æ—¶è°ƒåº¦ã€‚è¿™é‡Œä½¿ç”¨çš„æ˜¯cfsè°ƒåº¦æœºåˆ¶ã€‚</p></blockquote><p><a href=https://zhuanlan.zhihu.com/p/346050404>å…·ä½“ä»‹ç»</a>ï¼Œå¤§æ¦‚åˆ†ä¸ºä¸¤ç±»:
<strong>cpu.XX</strong> : ç”¨æ¥é™åˆ¶cgroupçš„CPUä½¿ç”¨ç‡
<strong>cpuacct.XX</strong> : ç”¨æ¥ç»Ÿè®¡cgroupçš„CPUçš„ä½¿ç”¨ç‡
å¯ä»¥åˆ©ç”¨cpuacctçš„å€¼æ¥åšcpuæ€§èƒ½ç›‘æ§ï¼š
cpuacct.usage: è¯¥cgroupä¸­æ‰€æœ‰ä»»åŠ¡æ€»å…±ä½¿ç”¨çš„CPUæ—¶é—´ï¼ˆnsçº³ç§’ï¼‰
cpuacct.stat: è¯¥cgroupä¸­æ‰€æœ‰ä»»åŠ¡æ€»å…±ä½¿ç”¨çš„CPUæ—¶é—´ï¼ŒåŒºåˆ†userå’Œsystemæ—¶é—´ã€‚
cpuacct.usage_percpu: è¯¥cgroupä¸­æ‰€æœ‰ä»»åŠ¡ä½¿ç”¨å„ä¸ªCPUæ ¸æ•°çš„æ—¶é—´ã€‚
è®¡ç®—cpuåˆ©ç”¨ç‡ç¤ºä¾‹ï¼š</p><pre><code class=language-bash># 1. è·å–å½“å‰æ—¶é—´ï¼ˆçº³ç§’ï¼‰
tstart=$(date +%s%N)
# 2. è·å–cpuacct.usage
cstart=$(cat /xxx/cpuacct.usage)
# 3. é—´éš”5sç»Ÿè®¡ä¸€ä¸‹
sleep 5
# 4. å†æ¬¡é‡‡ç‚¹
tstop=$(date +%s%N)
cstop=$(cat /xxx/cpuacct.usage)
# 5. è®¡ç®—åˆ©ç”¨ç‡
($cstop - $cstart) / ($tstop - $tstart) * 100
</code></pre><h3 id=memoryæ–‡ä»¶å¤¹å†…å®¹>memoryæ–‡ä»¶å¤¹å†…å®¹ï¼š</h3><pre><code>lk233@vm-5gc:/sys/fs/cgroup/memory/lk233_cpu_test/limit_50$ tree
.
â”œâ”€â”€ cgroup.clone_children
â”œâ”€â”€ cgroup.event_control
â”œâ”€â”€ cgroup.procs
â”œâ”€â”€ memory.failcnt
â”œâ”€â”€ memory.force_empty
â”œâ”€â”€ memory.kmem.failcnt
â”œâ”€â”€ memory.kmem.limit_in_bytes
â”œâ”€â”€ memory.kmem.max_usage_in_bytes
â”œâ”€â”€ memory.kmem.slabinfo
â”œâ”€â”€ memory.kmem.tcp.failcnt
â”œâ”€â”€ memory.kmem.tcp.limit_in_bytes
â”œâ”€â”€ memory.kmem.tcp.max_usage_in_bytes
â”œâ”€â”€ memory.kmem.tcp.usage_in_bytes
â”œâ”€â”€ memory.kmem.usage_in_bytes
â”œâ”€â”€ memory.limit_in_bytes
â”œâ”€â”€ memory.max_usage_in_bytes
â”œâ”€â”€ memory.move_charge_at_immigrate
â”œâ”€â”€ memory.numa_stat
â”œâ”€â”€ memory.oom_control
â”œâ”€â”€ memory.pressure_level
â”œâ”€â”€ memory.soft_limit_in_bytes
â”œâ”€â”€ memory.stat
â”œâ”€â”€ memory.swappiness
â”œâ”€â”€ memory.usage_in_bytes
â”œâ”€â”€ memory.use_hierarchy
â”œâ”€â”€ notify_on_release
â””â”€â”€ tasks
</code></pre><p>å†…å­˜çš„å…·ä½“å‚æ•°å°±ä¸èµ˜è¿° å…·ä½“å¯ä»¥çœ‹çŸ¥ä¹æˆ–google</p><h3 id=cgroupsèµ„æºæ“ä½œ>Cgroupsèµ„æºæ“ä½œ</h3><p>åŸå§‹çš„æ–¹æ³•ï¼Œä¾‹å¦‚æˆ‘è¿™é‡Œé™åˆ¶cpuå ç”¨ä¸º50%ï¼Œå¯ä»¥å¦‚ä¸‹æ‰§è¡Œ</p><pre><code class=language-bash>sudo mkdir /sys/fs/cgroup/cpu/lk233_cpu_test/limit_50/
# åˆ›å»ºå¥½ç›®å½•åå°±ä¼šè‡ªåŠ¨æŒ‚è½½å¹¶ç”Ÿæˆå¯¹åº”æ§åˆ¶ç»„æ–‡ä»¶
sudo echo '100000' &gt; test_cpu/cpu.cfs_period_us
sudo echo '50000' &gt; test_cpu/cpu.cfs_quota_us
sudo echo è¿›ç¨‹pid &gt;&gt; /sys/fs/cgroup/cpu/lk233_cpu_test/limit_50/tasks
</code></pre><p>å½“ç„¶ä¸å¿…å¦‚æ­¤åŸå§‹æ“ä½œï¼Œå¯ä»¥å¦‚ä¸‹<code>sudo apt install cgroup-bin</code>ä½¿ç”¨ä¸€äº›è‡ªåŠ¨åˆ›å»ºçš„å·¥å…·ï¼Œä¾‹å¦‚ä¸Šé¢çš„lk233_cpu_test æ˜¯ä¸€ä¸ªç®¡ç†ç»„ï¼Œç›´æ¥ç”¨ cgcreate åšä¹Ÿå¯ã€‚ï¼ˆåˆ›å»ºçš„åå­—éšæ„ï¼Œè¿™é‡Œå†…å­˜æ§åˆ¶ç»„æ— æ„çš„å‘½åä¸ºlk233_cpu_testäº†ğŸ˜‚ï¼‰</p><pre><code class=language-bash># åˆ›å»ºæ§åˆ¶ç»„
sudo cgcreate -t $USER:$USER -a $USER:$USER -g cpu:lk233_cpu_test/limit_50
# ç”¨æ¥é…ç½®æ—¶é—´å‘¨æœŸé•¿åº¦ï¼Œå•ä½æ˜¯usï¼Œå–å€¼èŒƒå›´1000~1000000ï¼š1ms ~ 1s  ç³»ç»Ÿæ€»æ—¶é—´ç‰‡ä¸º æ ¸å¿ƒæ•° * cpu.cfs_period_us
cgset -r cpu.cfs_period_us=100000 lk233_cpu_test/limit_50
# è®¾ç½®å¯ç”¨CPUæ—¶é—´æ•°ï¼Œå•ä½usï¼Œæœ€å°å€¼ä¸º1000
cgset -r cpu.cfs_quota_us=50000 lk233_cpu_test/limit_50
# åˆ é™¤æ§åˆ¶ç»„
sudo cgdelete cpu:lk233_cpu_test/limit_50
# è¯»å–é…ç½®ç»„å‚æ•°
cgget -g cpu:lk233_cpu_test/limit_50


# åŒç†å†…å­˜è®¾ç½®ä¸Šé™ä¸º100MB(å‚æ•°å•ä½ä¸ºå­—èŠ‚)çš„æ“ä½œç±»ä¼¼ å…·ä½“å¦‚ä¸‹æ‰€ç¤º
sudo cgcreate -t $USER:$USER -a $USER:$USER -g memory:lk233_cpu_test/limit_50
cgset -r memory.limit_in_bytes=104857600 lk233_cpu_test/limit_50
</code></pre><h3 id=æ‰§è¡Œç¨‹åº>æ‰§è¡Œç¨‹åº</h3><p>ç”±äºä»£ç åªè€ƒè™‘äº†çº¿ç¨‹çš„æƒ…å†µï¼Œlxcå®¹å™¨å†…è¿›ç¨‹æ˜¯forkå½¢å¼ï¼Œæ‰€ä»¥è¿™é‡Œä»£ç é‡Œæ·»åŠ äº†ä¸€ä¸ªforkçš„å‡½æ•°ã€‚ç¼–è¯‘è¯¥ç¨‹åºï¼Œè®°å¾—æ·»åŠ åŠ¨æ€åº“å‚æ•° <code>g++ -o cpu_test cpu_test.cpp --std=c++11 -lpthread</code></p><pre><code class=language-cpp>void test_cpu() {
    pid_t tid = syscall(SYS_gettid);
    printf(&quot;cpu theard id is %d\n&quot;, tid);
    int total = 0;
    while (1) {
        ++total;
    }
}

void test_mem() {
    pid_t tid = syscall(SYS_gettid);
    printf(&quot;mem theard id is %d\n&quot;, tid);
    int step = 10;
    int size = 20 * 1024 * 1024; // 20Mb
    for (int i = 0; i &lt; step; ++i) {
        char* tmp = new char[size];
        if (tmp == nullptr) {
            printf(&quot;new error, %d MB memory is used\n&quot;, i*20);
            return;
        }
        printf(&quot;tmp address is %p\n&quot;, tmp);
        memset(tmp, i, size);
        sleep(1);
    }
    printf(&quot;thread: 200 MB memory is used\n&quot;);
}

int main(int argc, char** argv) { // è·‘cpuã€å†…å­˜çº¿ç¨‹ï¼Œå¹¶ä¸”forkå†…å­˜è¿›ç¨‹
    pid_t tid = syscall(SYS_gettid);
    printf(&quot;father theard id is %d\n&quot;, tid);
    std::thread t1(test_cpu);
    std::thread t2(test_mem);

    pid_t pid = fork();
    if (pid &lt; 0) {
        printf(&quot;error\n&quot;);
        return 1;
    }
    else if (pid == 0) {
        printf(&quot;fork success,this is son process: &quot;);
        test_cpu();
    }
    else {
        t1.join();
        t2.join();
    }
    return 0;
}

int main1(int argc, char** argv) { // è·‘ä¸¤ä¸ªcpuçº¿ç¨‹
    pid_t tid = syscall(SYS_gettid);
    printf(&quot;father theard id is %d\n&quot;, tid);
    std::thread t1(test_cpu);
    std::thread t2(test_cpu);
    t1.join();
    t2.join();
    return 0;
}
</code></pre><h2 id=ç»“æœåˆ†æ>ç»“æœåˆ†æ</h2><blockquote><p>æˆ‘ä»¬è‡ªå·±å»ºçš„æ§åˆ¶ç»„é‡å¯åä¼šä¸¢å¤± å¯ä»¥ç±»ä¼¼dockerçš„serviceé‡å¯åè‡ªåŠ¨åˆ›å»ºå¯¹åº”æ§åˆ¶ç»„</p></blockquote><ul><li><p>cpuç›¸å…³çš„æ§åˆ¶æµ‹è¯•</p><p>cpu_test å­çº¿ç¨‹test_cpuå‡½æ•°å¾ªç¯+1ä¼šå ç”¨æ‰€æœ‰cpuæ—¶é—´ç‰‡ï¼Œå®¹æ˜“æ˜¾ç¤ºè§‚å¯Ÿåˆ°ã€‚é¦–å…ˆæ³¨é‡Štest_memå†…å­˜ç›¸å…³çš„ä»£ç ã€‚é€šè¿‡ cgexec å®ç°æ‰§è¡Œè¯¥è¿›ç¨‹ç›´æ¥åŠ å…¥æ§åˆ¶ç»„<code>cgexec -g cpu:lk233_cpu_test/limit_50 ./cpu_test</code></p><p>æœªè®¾ç½®æ§åˆ¶ç»„(ä¸»å‡½æ•°æ‰§è¡Œmain1æƒ…å†µ):</p><p><img src=/other/cgroups/cpu_1.jpg alt></p><p>ç”±äºæˆ‘çš„linuxä¸»æœºæ˜¯åŒæ ¸çš„ï¼Œæ‰€ä»¥topå‘½ä»¤æŸ¥å‡ºæ¥çš„cpuå ç”¨è¾¾åˆ°200%ã€‚(ä¸¤ä¸ªcpuæ ¸è·‘æ»¡)</p><p>è®¾ç½®æ§åˆ¶ç»„å</p><p><img src=/other/cgroups/cpu_2.jpg alt></p><p>å¯ä»¥çŸ¥é“æ§åˆ¶ç»„æ§åˆ¶cpuæ—¶é—´æ˜¯ç»Ÿè®¡åŠ å…¥åˆ°æ”¹ç»„çš„å…¨éƒ¨è¿›ç¨‹ã€çº¿ç¨‹å¹¶æ§åˆ¶ã€‚æ‰€ä»¥å‰é¢è®¾ç½®æ—¶é—´ç‰‡ä¸º50000ï¼Œå“ªæ€•æ˜¯ä¸¤ä¸ªçº¿ç¨‹ä¹Ÿåªå äº†50%ã€‚è¿™é‡Œ æ€»æ—¶é—´ç‰‡ä¸º cpu.cfs_period_us * 4 = 400000 cpuæœ€å¤§è·‘åˆ°400%ã€‚</p><p>æŸ¥è¯¢task <code>cat /sys/fs/cgroup/cpu/lk233_cpu_test/limit_50/tasks</code>å¯ä»¥çœ‹åˆ°æœ‰å¤šå°‘è¿›ç¨‹åŠ å…¥è¯¥æ§åˆ¶ç»„ã€‚</p><p><img src=/other/cgroups/cpu_task.jpg alt></p><p>ä½†æ˜¯è¿™é‡Œæˆ‘çœ‹åˆ°äº†ä¸¤ä¸ªpidï¼Œå¯æ˜¯æŒ‰ç…§æˆ‘ä»¬å¹³æ—¶çš„å­¦ä¹ ï¼Œä¸€ä¸ªè¿›ç¨‹çš„å¤šä¸ªçº¿ç¨‹å…¬ç”¨ä¸€ä¸ªpidã€‚æ‰€ä»¥æˆ‘è¯•ç€ä½¿ç”¨ attach å‘½ä»¤å°†è¿è¡Œçš„è¿›ç¨‹åŠ å…¥æ§åˆ¶ç»„çš„taskçœ‹çœ‹æ˜¯å¦ä¼šå˜æˆä¸¤ä¸ªã€‚</p><p>å°†pidç»‘å…¥å¯¹åº”ç›®å½•taskï¼Œ<code>cgclassify -g cpu:lk233_cpu_test/limit_50 çº¿ç¨‹tid list</code> æƒ³è¦åˆ é™¤æ§åˆ¶å¯ä»¥ç•™ä¸€ä¸ªæ²¡æœ‰é…ç½®çš„æ§åˆ¶ç»„ï¼Œå°†è¯¥è¿›ç¨‹ç§»æ¤è¿‡å»ã€‚ç»“æœæŸ¥è¯¢taskå‘ç°åªæœ‰ä¸€ä¸ªpidï¼Œä½†æ˜¯cpuèµ„æºå¹¶æ²¡æœ‰å—åˆ°æ§åˆ¶ã€‚è¯´æ˜æ´¾ç”Ÿçš„çº¿ç¨‹æ²¡æœ‰åŠ å…¥æ§åˆ¶ç»„ã€‚</p><p>ä¸€ç•ªæŸ¥è¯¢åï¼Œ<a href=https://stackoverflow.com/questions/9305992/if-threads-share-the-same-pid-how-can-they-be-identified>stackflowä¸Šçš„è¿™ä¸ªå›ç­”</a>å¾ˆä¸é”™ã€‚</p><p>æ³¨æ„è¿™é‡Œçš„å¤šçº¿ç¨‹ pid ç”¨æˆ·æ€å­çº¿ç¨‹pid(çº¿ç¨‹ç»„tgid)çš„ç¡®ç›¸åŒ ä½†æ˜¯å†…æ ¸æ€ä¸åŒ(å«åš thread id, tid) æ‰€ä»¥æ·»åŠ taskè¿™é‡Œåªé™åˆ¶çˆ¶çº¿ç¨‹æ— æ•ˆ</p><pre><code class=language-bash>/* ç”¨æˆ·æ€çœ‹çš„æ˜¯ tgid  å†…æ ¸æ€çœ‹çš„æ˜¯tid 
                    **USER VIEW**
&lt;-- PID 43 --&gt;|&lt;----------------- PID 42 -----------------&gt;
              |                            |
              |       +---------+          |
              |       | process |          |
              |      _| tid=42  |_         |
         __(fork) _/  | tgid=42 | \_ (new thread) _
        /     |       +---------+          |       \
+---------+   |                            |    +---------+
| process |   |                            |    | process |
| tid=43  |   |                            |    | tid=44  |
| tgid=43 |   |                            |    | tgid=42 |
+---------+   |                            |    +---------+
              |                            |
&lt;-- PID 43 --&gt;|&lt;--------- PID 42 ---------&gt;|&lt;--- PID 44 ---&gt;
                    **KERNEL VIEW**
# å‘½ä»¤è¡Œä¸‹æŸ¥è¯¢ å¯ä»¥çœ‹åˆ°å­çº¿ç¨‹çš„tid
pstree -p &amp;pid
cpu_test(79426)â”€â”¬â”€{cpu_test}(79427)
            â””â”€{cpu_test}(79428)
# ç¨‹åºä¸­
tgid:   getpid()
tid:    syscall(SYS_gettid)
çº¿ç¨‹id: pthread_self() 
# çº¿ç¨‹id æ˜¯ pthread åº“ç»´æŒçš„, æ•…æ­¤â€œIDâ€çš„ä½œç”¨åŸŸæ˜¯è¿›ç¨‹çº§è€Œéç³»ç»Ÿçº§
# æ‰€ä»¥å‰é¢çš„cppä»£ç æˆ‘ç›´æ¥æ·»åŠ äº†æ‰“å°tidçš„è¯­å¥ã€‚
</code></pre><blockquote><p>æˆ‘åœ¨æ­¤ä¹‹åç»§ç»­æµ‹è¯•ï¼Œæœ€åå¾—å‡ºç»“è®ºï¼š<strong>æ·»åŠ å…¥æ§åˆ¶ç»„çš„è¿›ç¨‹ï¼Œæ— è®ºforkè¿˜æ˜¯å­çº¿ç¨‹éƒ½ä¼šè‡ªåŠ¨åŠ å…¥æ§åˆ¶ç»„ï¼Œåœ¨æ­¤ä¹‹å‰çš„ä¸ä¼šåŠ å…¥æ§åˆ¶ç»„ã€‚</strong></p></blockquote><p>ä¸‹é¢æ˜¯æˆ‘å°†coreé‡Œçš„lxcå®¹å™¨ç»‘å®šåˆ°æ§åˆ¶ç»„çš„ç»“æœ</p><p><img src=/other/cgroups/cpu_task.jpg alt></p></li><li><p>å†…å­˜ç›¸å…³çš„æ§åˆ¶æµ‹è¯•</p><blockquote><p>åœ¨topç»ˆç«¯ç•Œé¢ä¸‹è¾“å…¥hæŸ¥çœ‹å¸®åŠ©ã€‚æŒ‰Eåˆ‡æ¢å†…å­˜å•ä½ï¼Œ1å¼€å¯cpuæ ¸å¿ƒæŸ¥çœ‹ï¼ŒmæŸ¥çœ‹å†…å­˜è¯¦ç»†ä½¿ç”¨ã€‚</p></blockquote><p>æ­£å¸¸å¯åŠ¨æ—¶ï¼Œå¯ä»¥çœ‹åˆ°å†…å­˜å ç”¨ä¸º 5917.914 * 3.4% = 201 mb</p><p><img src=/other/cgroups/mem_1.jpg alt></p><p>å†…å­˜æ§åˆ¶ç»„ç±»ä¼¼cpuæ§åˆ¶ç»„åšæ³•ï¼Œè¿™é‡Œè¿›ç¨‹æ—¢åŠ å…¥cpuæ§åˆ¶ç»„ä¹ŸåŠ å…¥å†…å­˜æ§åˆ¶ç»„ã€‚</p><p><code>cgexec -g cpu:lk233_cpu_test/limit_50 -g memory:lk233_cpu_test/limit_50 ./cpu_test</code></p><p>ç»“æœåˆ›å»ºå†…å­˜æ¡ˆä¾‹ä¼šåˆ›å»º200Mbï¼Œä½†æ˜¯æˆ‘é™åˆ¶äº†100mbä¼šæŠ¥é”™ä¹‹ç±»çš„ï¼Œä½†æ˜¯ä¸€åˆ‡æ­£å¸¸ï¼Œåªæ˜¯æ‰§è¡Œåé¢ç”³è¯·100mbæ—¶æ‰“å°è¯­å¥é€Ÿåº¦å˜æ…¢ã€‚</p><p>ä»”ç»†è§‚å¯Ÿåå‘ç°ï¼ŒåŸæ¥å†…å­˜ä¸å¤Ÿä»–å»ç”³è¯·è™šæ‹Ÿå†…å­˜å»äº†ï¼Œä»€ä¹ˆç²¾æ‰“ç»†ç®—å¤ŸğŸ™„</p><p><img src=/other/cgroups/mem_21.jpg alt></p><p>æˆ‘ä»¬ç»§ç»­ï¼Œçœ‹çœ‹è®¾ç½®ä¸ç”¨è™šæ‹Ÿå†…å­˜ å†…å­˜ä¸å¤Ÿåä¼šå‘ç”Ÿä»€ä¹ˆã€‚</p><p><code>cgset -r memory.swappiness=0 lk233_cpu_test/limit_50</code></p><p>ç»“æœå°±æ˜¯ç»ˆç«¯ç›´æ¥æ‰“å° <em>å·²æ€æ­»</em>ï¼Œå¥½å®¶ä¼™ï¼ç„¶åçœ‹äº†è¿™ç¯‡<a href=https://www.sohu.com/a/425414172_283613>æ–‡ç« </a>å¯ä»¥é…ç½® oom_kill_disable åœ¨æ§åˆ¶ç»„å†…è¿›ç¨‹ç”³è¯·å†…å­˜ä¸è¶³æ—¶ç­‰å¾…è€Œä¸æ˜¯ç›´æ¥æ€æ­»</p><p><code>cgset -r memory.oom_control=1 lk233_cpu_test/limit_50</code></p></li></ul><h2 id=æ€»ç»“>æ€»ç»“</h2><p>coreå†…çš„lxcå®¹å™¨æ˜¯å¯ä»¥ç›´æ¥ä½¿ç”¨ cgclassify ç»‘å®šæ§åˆ¶ç»„çš„ï¼Œä¹‹åå¯ä»¥é’ˆå¯¹ä¸åŒéœ€æ±‚æå‰è‡ªåŠ¨åŒ–åˆ›å»ºæ§åˆ¶ç»„ã€‚ä¹Ÿå¯ä»¥åœ¨ç•Œé¢æ·»åŠ é€‰é¡¹æ¥å£ï¼Œä½¿ç”¨cpuacct.usageç­‰å‚æ•°è®¡ç®—cpuå ç”¨ï¼Œåšåˆ°å®æ—¶åˆ›å»ºæ§åˆ¶ç»„å¹¶å®ç°å®¹å™¨èµ„æºçš„æ§åˆ¶ä¸ç›‘å¬ã€‚</p></div><div class=article-footer><div class="panel panel-default panel-badger"><div class=panel-body><figure class=media><div class=media-left><a href=https://github.com/liangkang233 target=_blank class="img-burn thumb-sm visible-lg"><img src=https://liangkang233.github.io/web/head.png class="img-rounded w-full" alt></a></div><div class=media-body><h3 class=media-heading></h3><a href=https://github.com/liangkang233 target=_blank></a><span class=text-dark>LK233</span></a></h3><div>ä»£ç å’Œæˆ‘, æœ‰ä¸€ä¸ªèƒ½è·‘å°±è¡Œ ğŸ¤¡</div></div></figure></div></div></div></article><section id=comments><div id=vcomments></div></section></div><nav class="bar bar-footer clearfix" data-stick-bottom><div class=bar-inner><ul class="pager pull-left"><li class=prev><a href=https://liangkang233.github.io/2022/10/grpc%E6%B5%81%E5%8F%8A%E5%BC%82%E6%AD%A5%E7%9A%84%E5%AD%A6%E4%B9%A0/ title=gRPCæµã€å¼‚æ­¥é€šä¿¡><i class="icon icon-angle-left" aria-hidden=true></i><span>&nbsp;&nbsp;ä¸‹ä¸€ç¯‡</span></a></li><li class=toggle-toc><a class="toggle-btn collapsed" data-toggle=collapse href=#collapseToc aria-expanded=false title=æ–‡ç« ç›®å½• role=button><span>[&nbsp;</span><span>æ–‡ç« ç›®å½•</span>
<i class="text-collapsed icon icon-anchor"></i>
<i class="text-in icon icon-close"></i>
<span>]</span></a></li></ul><div class=bar-right><div class=share-component data-sites=qq,wechat,facebook,twitter data-mobile-sites=qq,wechat,facebook,twitter></div></div></div></nav></main><footer class=footer itemscope itemtype=http://schema.org/WPFooter><ul class=social-links><li><a href=https://www.linkedin.com/in/kang-liang-79b3b5216/ target=_blank title=linkedin data-toggle=tooltip data-placement=top><i class="icon icon-linkedin"></i></a></li><li><a href="http://wpa.qq.com/msgrd?v=3&uin=3479202458&site=qq&menu=yes" target=_blank title=qq data-toggle=tooltip data-placement=top><i class="icon icon-qq"></i></a></li></ul><div class=copyright>&copy;2020 -
2022 <a href=https://github.com/liangkang233 target=_blank>LK233</a><div class=post-copyright-license><strong>License:</strong>
<a href=http://creativecommons.org/licenses/by/4.0/deed.zh target=_blank rel=external>CC BY 4.0 CN</a></div></div></footer><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_SVG"></script>
<script type=text/x-mathjax-config>
    MathJax.Hub.Config({
            showMathMenu: false, //disables context menu
            tex2jax: {
            inlineMath: [ ['$','$'], ['\\(','\\)'] ]
           }
    });
</script><script src=https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js></script>
<script>window.jQuery||document.write('<script src="js/jquery.min.js"><\/script>')</script><script type=text/javascript src=https://cdn.staticfile.org/highlight.js/9.15.10/highlight.min.js></script>
<script>hljs.configure({tabReplace:"    ",classPrefix:""}),hljs.initHighlightingOnLoad()</script><script src=https://liangkang233.github.io/js/application.min.e4989ab4dc212027af8773861b05b6bc333a1217f6b0a1b3377a3a3dbd454483.js></script>
<script src=https://liangkang233.github.io/js/plugin.min.738a460bf4317fac61717f1bca393e53d00973db9754d9f0a81c7312d5874840.js></script>
<script>(function(e){var t={TRANSLATION:{POSTS:"æ–‡ç« ",PAGES:"é¡µé¢",CATEGORIES:"åˆ†ç±»",TAGS:"æ ‡ç­¾",UNTITLED:"(æœªå‘½å)"},ROOT_URL:"https://liangkang233.github.io/",CONTENT_URL:"https://liangkang233.github.io//searchindex.json "};e.INSIGHT_CONFIG=t})(window)</script><script type=text/javascript src=https://liangkang233.github.io/js/insight.min.716b0c6a00b68ccc31a2b65345f3412f4246ffa94a90f8e25d525528b4504f9937880692bbe619023233caba5d0a17ebe23d7cfb57cd3a88f23ea337ad5e4d00.js defer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.min.js></script>
<script>tocbot.init({tocSelector:".js-toc",contentSelector:".js-toc-content",headingSelector:"h1, h2, h3",hasInnerContainers:!0})</script><script src=https://cdn1.lncld.net/static/js/3.0.4/av-min.js></script>
<script src=https://cdn.jsdelivr.net/npm/valine></script>
<script type=text/javascript>var GUEST=["nick","mail","link"],meta="nick,mail",meta=meta.split(",").filter(function(e){return GUEST.indexOf(e)>-1});new Valine({el:"#vcomments",verify:null,notify:null,appId:"2A2wQX1Rs6bncdlrRguNq27J-gzGzoHsz",appKey:"hFOX6badEuckpc33uwYqWFDk",placeholder:"è¯„è®ºæ¡†ä¸Šæ–¹å¯ä»¥ç•™ä¸‹è”ç³»é‚®ç®±ï¼Œè¯„è®ºæ”¯æŒMDè¯­æ³•",avatar:"retro",meta,pageSize:"10"||10,visitor:!1,emojiCDN:"//i0.hdslb.com/bfs/emote/",emojiMaps:{"è—ç‹":"ba0937ef6f3ccca85e2e0047e6263f3b4da37201.png",doge:"3087d273a78ccaff4bb1e9972e2ba2a7583c9f11.png","å¾®ç¬‘":"685612eadc33f6bc233776c6241813385844f182.png",OK:"4683fd9ffc925fa6423110979d7dcac5eda297f4.png","æ˜Ÿæ˜Ÿçœ¼":"63c9d1a31c0da745b61cdb35e0ecb28635675db2.png","å¦™å•Š":"b4cb77159d58614a9b787b91b1cd22a81f383535.png","è¾£çœ¼ç›":"35d62c496d1e4ea9e091243fa812866f5fecc101.png","åƒç“œ":"4191ce3c44c2b3df8fd97c33f85d3ab15f4f3c84.png","æ»‘ç¨½":"d15121545a99ac46774f1f4465b895fe2d1411c3.png","å‘²ç‰™":"b5a5898491944a4268360f2e7a84623149672eb6.png","æ‰“call":"431432c43da3ee5aab5b0e4f8931953e649e9975.png","æ­ªå˜´":"4384050fbab0586259acdd170b510fe262f08a17.png","è°ƒçš®":"8290b7308325e3179d2154327c85640af1528617.png","å—‘ç“œå­":"28a91da1685d90124cfeead74622e1ebb417c0eb.png","ç¬‘å“­":"c3043ba94babf824dea03ce500d0e73763bf4f40.png","è„±å•doge":"bf7e00ecab02171f8461ee8cf439c73db9797748.png","ç»™å¿ƒå¿ƒ":"1597302b98827463f5b75c7cac1f29ea6ce572c4.png","å˜Ÿå˜Ÿ":"abd7404537d8162720ccbba9e0a8cdf75547e07a.png","å–œæ¬¢":"8a10a4d73a89f665feff3d46ca56e83dc68f9eb8.png","é…¸äº†":"92b1c8cbceea3ae0e8e32253ea414783e8ba7806.png","å“¦å‘¼":"362bded07ea5434886271d23fa25f5d85d8af06c.png","å«Œå¼ƒ":"de4c0783aaa60ec03de0a2b90858927bfad7154b.png","å¤§å“­":"2caafee2e5db4db72104650d87810cc2c123fc86.png","å®³ç¾":"9d2ec4e1fbd6cb1b4d12d2bbbdd124ccb83ddfda.png","ç–‘æƒ‘":"b7840db4b1f9f4726b7cb23c0972720c1698d661.png","å–œæè€Œæ³£":"485a7e0c01c2d70707daae53bee4a9e2e31ef1ed.png","å¥¸ç¬‘":"bb84906573472f0a84cebad1e9000eb6164a6f5a.png","ç¬‘":"81edf17314cea3b48674312b4364df44d5c01f17.png","å·ç¬‘":"6c49d226e76c42cd8002abc47b3112bc5a92f66a.png","æƒŠè®¶":"f8e9a59cad52ae1a19622805696a35f0a0d853f3.png","æ‚è„¸":"6921bb43f0c634870b92f4a8ad41dada94a5296d.png","é˜´é™©":"ba8d5f8e7d136d59aab52c40fd3b8a43419eb03c.png","å›§":"12e41d357a9807cc80ef1e1ed258127fcc791424.png","å‘†":"33ad6000d9f9f168a0976bc60937786f239e5d8c.png","æŠ é¼»":"cb89184c97e3f6d50acfd7961c313ce50360d70f.png","å¤§ç¬‘":"ca94ad1c7e6dac895eb5b33b7836b634c614d1c0.png","æƒŠå–œ":"0afecaf3a3499479af946f29749e1a6c285b6f65.png","æ— è¯­":"44667b7d9349957e903b1b62cb91fb9b13720f04.png","ç‚¹èµ":"1a67265993913f4c35d15a6028a30724e83e7d35.png","é¼“æŒ":"895d1fc616b4b6c830cf96012880818c0e1de00d.png","å°´å°¬":"cb321684ed5ce6eacdc2699092ab8fe7679e4fda.png","çµé­‚å‡ºçª":"43d3db7d97343c01b47e22cfabeca84b4251f35a.png","å§”å±ˆ":"d2f26cbdd6c96960320af03f5514c5b524990840.png","å‚²å¨‡":"010540d0f61220a0db4922e4a679a1d8eca94f4e.png","ç–¼":"905fd9a99ec316e353b9bd4ecd49a5f0a301eabf.png","å†·":"cb0ebbd0668640f07ebfc0e03f7a18a8cd00b4ed.png","ç”Ÿç—…":"0f25ce04ae1d7baf98650986454c634f6612cb76.png","å“":"9c10c5ebc7bef27ec641b8a1877674e0c65fea5d.png","å":"06946bfe71ac48a6078a0b662181bb5cad09decc.png","æ‚çœ¼":"c5c6d6982e1e53e478daae554b239f2b227b172b.png","å˜˜å£°":"e64af664d20716e090f10411496998095f62f844.png","æ€è€ƒ":"cfa9b7e89e4bfe04bbcd34ccb1b0df37f4fa905c.png","å†è§":"fc510306bae26c9aec7e287cdf201ded27b065b9.png","ç¿»ç™½çœ¼":"eba54707c7168925b18f6f8b1f48d532fe08c2b1.png","å“ˆæ¬ ":"888d877729cbec444ddbd1cf4c9af155a7a06086.png","å¥‹æ–—":"bb2060c15dba7d3fd731c35079d1617f1afe3376.png","å¢¨é•œ":"3a03aebfc06339d86a68c2d893303b46f4b85771.png","éš¾è¿‡":"a651db36701610aa70a781fa98c07c9789b11543.png",tv_doge:"6ea59c827c414b4a2955fe79e0f6fd3dcd515e24.png","tv_äº²äº²":"a8111ad55953ef5e3be3327ef94eb4a39d535d06.png","tv_å·ç¬‘":"bb690d4107620f1c15cff29509db529a73aee261.png","tv_å†è§":"180129b8ea851044ce71caf55cc8ce44bd4a4fc8.png","tv_å†·æ¼ ":"b9cbc755c2b3ee43be07ca13de84e5b699a3f101.png","tv_å‘æ€’":"34ba3cd204d5b05fec70ce08fa9fa0dd612409ff.png","tv_å‘è´¢":"34db290afd2963723c6eb3c4560667db7253a21a.png","tv_å¯çˆ±":"9e55fd9b500ac4b96613539f1ce2f9499e314ed9.png","tv_åè¡€":"09dd16a7aa59b77baa1155d47484409624470c77.png","tv_å‘†":"fe1179ebaa191569b0d31cecafe7a2cd1c951c9d.png","tv_å‘•å":"9f996894a39e282ccf5e66856af49483f81870f3.png","tv_å›°":"241ee304e44c0af029adceb294399391e4737ef2.png","tv_åç¬‘":"1f0b87f731a671079842116e0991c91c2c88645a.png","tv_å¤§ä½¬":"093c1e2c490161aca397afc45573c877cdead616.png","tv_å¤§å“­":"23269aeb35f99daee28dda129676f6e9ea87934f.png","tv_å§”å±ˆ":"d04dba7b5465779e9755d2ab6f0a897b9b33bb77.png","tv_å®³ç¾":"a37683fb5642fa3ddfc7f4e5525fd13e42a2bdb1.png","tv_å°´å°¬":"7cfa62dafc59798a3d3fb262d421eeeff166cfa4.png","tv_å¾®ç¬‘":"70dc5c7b56f93eb61bddba11e28fb1d18fddcd4c.png","tv_æ€è€ƒ":"90cf159733e558137ed20aa04d09964436f618a1.png","tv_æƒŠå“":"0d15c7e2ee58e935adc6a7193ee042388adc22af.png"}})</script></body></html>